sources:
- name: server1
  url: ws://localhost:8080/ws/watchlist
  enabled: true
  priority: 1
  reconnect: true
  reconnect_interval: 5000
  reconnect_max_attempts: 0
  token: ${SOURCE_SERVER1_TOKEN:-}

aggregation:
  deduplication:
    enabled: true
    time_window: 30
    cache_size: 10000
    ttl_multiplier: 2
  state_tracking:
    enabled: true
    expire_after: 3600
    track_history: false
    max_history_points: 100

output:
  host: 0.0.0.0
  port: 8090
  max_clients: 500
  compression: true
  enable_raw_stream: true
  enable_filtered_stream: true

redis:
  host: localhost
  port: 6379
  db: 0
  password: ${REDIS_PASSWORD:-}

database:
  enabled: false
  path: ./data/collettore.db

logging:
  level: info
  format: json

monitoring:
  enabled: true
  stats_interval: 30000

api_security:
  enabled: false
  bearer_token: ${API_BEARER_TOKEN:-}

rate_limiting:
  enabled: true
  default_limit: "100/minute"

cors:
  enabled: true
  allowed_origins: ${CORS_ALLOWED_ORIGINS:-*}
  allow_credentials: true
  allow_methods: "GET,POST,DELETE"
  allow_headers: "Authorization,Content-Type"
  max_age: 600

keycloak:
  enabled: ${KEYCLOAK_ENABLED:-false}
  server_url: ${KEYCLOAK_SERVER_URL:-https://keycloak.example.com}
  realm: ${KEYCLOAK_REALM:-collettore}
  client_id: ${KEYCLOAK_CLIENT_ID:-collettore-admin}
  client_secret: ${KEYCLOAK_CLIENT_SECRET:-}
  admin_role: ${KEYCLOAK_ADMIN_ROLE:-collettore-admin}
  skip_ssl_verify: ${KEYCLOAK_SKIP_SSL_VERIFY:-false}
